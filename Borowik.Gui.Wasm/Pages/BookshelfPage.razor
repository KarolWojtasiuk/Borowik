@page "/Bookshelf/{bookshelfId:guid}"
@using Borowik.Books.Contracts
@using Borowik.Books.Entities

<Heading Size="HeadingSize.Is1">Bookshelf</Heading>
@if (_bookshelf is not null)
{
    <Heading Size="HeadingSize.Is2">@_bookshelf?.Color</Heading>
}

@code
{
    [Parameter]
    public Guid BookshelfId { get; init; }

    [Inject]
    private IExceptionHandler ExceptionHandler { get; init; } = null!;

    [Inject]
    private IBorowikManager BorowikManager { get; init; } = null!;

    private BookshelfWithBooks? _bookshelf;

    protected override async Task OnParametersSetAsync()
    {
        var response = await ExceptionHandler.HandleAsync(() =>
            BorowikManager.SendRequestAsync(new GetBookshelfRequest(BookshelfId), CancellationToken.None));

        _bookshelf = response.BookshelfWithBooks;
    }
}